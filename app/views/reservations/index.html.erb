<% if current_guest && @reservations.any? %>
  <h2>Minhas Reservas</h2>

  <% @reservations.each do |r| %>
    <div class="reservations">
      <p><strong>Código da reserva:</strong> <%= r.code %></p>
      <p><strong>Nome da pousada:</strong> <%= r.guesthouse.brand_name %></p>
      <p><strong>Data de entrada:</strong> <%= I18n.localize(r.checkin) %></p>
      <p><strong>Data de saída:</strong> <%= I18n.localize(r.checkout) %></p>
      <% if r.confirmed? && r.elligible_for_cancellation? %>
        <%=
          button_to('Cancelar reserva',
                    inactivate_reservation_path(r.id),
                    method: :patch)
        %>
      <% else %>
        <p>
          <strong>Status:</strong> 
          <%= Reservation.human_attribute_name("status.#{r.status}") %>
        </p>
      <% end %>
    </div>
    <hr>
  <% end %>
<% elsif current_guest %>
  <p>Você ainda não possui reservas</p>
<% end %>

<% if current_user && @reservations.any? %>
  <h2>Reservas de <%= current_user.guesthouse.brand_name %> </h2>

  <div class="reservations">
    <% @reservations.each do |r| %>
      <div class="reservation-details">
        <p><strong>Código da reserva:</strong> <%= r.code %></p>
        <p><strong>Quarto:</strong> <%= r.room.name %></p>
        <p><strong>Responsável:</strong> <%= r.guest.name %></p>
        <p><strong>Data de entrada:</strong> <%= I18n.localize(r.checkin) %></p>
        <p><strong>Data de saída:</strong> <%= I18n.localize(r.checkout) %></p>
        <p><strong>Quantidade de hóspedes:</strong> <%= r.guest_count %></p>
        <p>
          <strong>Status:</strong> 
          <%= Reservation.human_attribute_name("status.#{r.status}") %>
        </p>
        <% if r.confirmed? || r.guests_checked_in? %>
          <%= link_to 'Gerenciar reserva', manage_reservation_path(r.id) %>
        <% end %>
      </div>
    <% end %>
  </div>
<% elsif current_user %>
  <p>Sua pousada ainda não possui reservas</p>
<% end %>